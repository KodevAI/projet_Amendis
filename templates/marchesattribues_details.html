{% extends 'base.html' %}

{% block title %}
    Détails du Marché Attribué
{% endblock %}

{% block content %}
    <div class="container mx-auto px-4 py-6">
        <div class="flex items-center justify-between mb-4 p-4 pb-0">
            <a href="{{ url_for('marchesattribues') }}">
                    <svg width="64px" height="64px" viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#000000" stroke-width="0.00024000000000000003"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.24000000000000005"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.4" d="M16.19 2H7.82C4.17 2 2 4.17 2 7.81V16.18C2 19.82 4.17 21.99 7.81 21.99H16.18C19.82 21.99 21.99 19.82 21.99 16.18V7.81C22 4.17 19.83 2 16.19 2Z" fill="#B23A3B"></path> <path d="M13.9195 8.48006H8.76945L9.09945 8.15006C9.38945 7.86006 9.38945 7.38006 9.09945 7.09006C8.80945 6.80006 8.32945 6.80006 8.03945 7.09006L6.46945 8.66006C6.17945 8.95006 6.17945 9.43006 6.46945 9.72006L8.03945 11.2901C8.18945 11.4401 8.37945 11.5101 8.56945 11.5101C8.75945 11.5101 8.94945 11.4401 9.09945 11.2901C9.38945 11.0001 9.38945 10.5201 9.09945 10.2301L8.83945 9.97006H13.9195C15.1995 9.97006 16.2495 11.0101 16.2495 12.3001C16.2495 13.5901 15.2094 14.6301 13.9195 14.6301H8.99945C8.58945 14.6301 8.24945 14.9701 8.24945 15.3801C8.24945 15.7901 8.58945 16.1301 8.99945 16.1301H13.9195C16.0295 16.1301 17.7495 14.4101 17.7495 12.3001C17.7495 10.1901 16.0295 8.48006 13.9195 8.48006Z" fill="#B23A3B"></path> </g></svg>
            </a>
            <h1 class="text-center text-3xl sm:text-4xl font-bold text-red ">Détails du Marché Attribué</h1>
            <h1></h1>
        </div>
        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-red">Informations du Contrat</h2>
            <table class="min-w-full table-auto bg-light_gray shadow-md rounded-lg border border-gray-200">
                <tbody>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Site</th>
                        <td class="px-4 py-2">{{ contrat.appel_offre.titre }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">N° AO</th>
                        <td class="px-4 py-2">{{ contrat.appel_offre.id }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Désignation</th>
                        <td class="px-4 py-2">{{ contrat.appel_offre.description }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Ouverture Financière</th>
                        <td class="px-4 py-2">{{ contrat.date_attribution.strftime('%d-%m-%Y') }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Montant DHHT</th>
                        <td class="px-4 py-2">{{ contrat.valeur_contrat }} DH</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Attributaire</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.nom }}</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-red">Informations du Fournisseur</h2>
            <table class="min-w-full table-auto bg-light_gray shadow-md rounded-lg border border-gray-200">
                <tbody>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Nom</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.nom }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Entreprise</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.entreprise }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Email</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.email }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Téléphone</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.telephone }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Adresse</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.adresse }}</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium">Date d'Inscription</th>
                        <td class="px-4 py-2">{{ contrat.fournisseur.date_inscription.strftime('%d-%m-%Y') }}</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-red">Documents Associés</h2>
            {% if documents %}
                <table class="min-w-full table-auto bg-light_gray shadow-md rounded-lg border">
                    <thead class="text-white bg-gradient-to-l from-[#333]  to-[#fa0504]">
                        <tr >
                            <th class="px-4 py-2 text-center font-medium">Nom du Fichier</th>
                            <th class="px-4 py-2 text-center font-medium">Type de Fichier</th>
                            <th class="px-4 py-2 text-center font-medium">Lien de Téléchargement</th>
                            <th class="px-4 py-2 text-center font-medium">Date de Téléchargement</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for document in documents %}
                        <tr class="hover:bg-gradient-to-l from-[#d9d9d9]  to-[#fecdcd] border-b">
                            <td class="px-4 py-2 text-center">{{ document.nom_fichier }}</td>
                            <td class="px-4 py-2 text-center">{{ document.type_fichier }}</td>
                            <td class="px-4 py-2 text-center">
                                <a href="{{ document.lien_fichier }}" target="_blank" class="text-blue-600 hover:text-blue-800">Télécharger</a>
                            </td>
                            <td class="px-4 py-2 text-center">{{ document.date_telechargement.strftime('%d-%m-%Y') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p class="text-center text-gray-500">Aucun document disponible.</p>
            {% endif %}
        </section>
    </div>
{% endblock %}
